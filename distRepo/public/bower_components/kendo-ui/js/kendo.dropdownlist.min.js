/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,define){define(["./kendo.list.min","./kendo.mobile.scroller.min"],e)}(function(){return function(e,t){function n(e,t,n){for(var i,o=0,r=t.length-1;r>o;++o)i=t[o],i in e||(e[i]={}),e=e[i];e[t[r]]=n}var i=window.kendo,o=i.ui,r=o.Select,a=i.support.mobileOS,s=i._activeElement,l=i.keys,c=".kendoDropDownList",h="disabled",d="readonly",u="change",f="k-state-focused",p="k-state-default",g="k-state-disabled",m="aria-disabled",v="aria-readonly",_="mouseenter"+c+" mouseleave"+c,w="tabindex",y="filter",b="accept",x=e.proxy,k=r.extend({init:function(n,o){var a,s,l,h=this,d=o&&o.index;h.ns=c,o=e.isArray(o)?{dataSource:o}:o,r.fn.init.call(h,n,o),o=h.options,n=h.element.on("focus"+c,x(h._focusHandler,h)),h._inputTemplate(),h._reset(),h._prev="",h._word="",h._wrapper(),h._tabindex(),h.wrapper.data(w,h.wrapper.attr(w)),h._span(),h._popup(),h._mobile(),h._dataSource(),h._ignoreCase(),h._filterHeader(),h._aria(),h._enable(),h._oldIndex=h.selectedIndex=-1,d!==t&&(o.index=d),h._initialIndex=o.index,h._optionLabel(),h._initList(),h._cascade(),o.autoBind?h.dataSource.fetch():-1===h.selectedIndex&&(l=o.text||"",l||(a=o.optionLabel,s=a&&0===o.index,h._isSelect?l=s?a:n.children(":selected").text():!n[0].value&&s&&(l=a)),h._textAccessor(l)),i.notify(h)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:null,fixedGroupTemplate:null},events:["open","close",u,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(e){r.fn.setOptions.call(this,e),this.listView.setOptions(e),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria()},destroy:function(){var e=this;e.wrapper.off(c),e.element.off(c),e._inputWrapper.off(c),e._arrow.off(),e._arrow=null,e.optionLabel.off(),r.fn.destroy.call(e)},open:function(){var e=this;e.popup.visible()||(this.dataSource.view().length&&e._state!==b?(e.popup.open(),e._focusElement(e.filterInput),e._focusItem()):(e._open=!0,e._state="rebind",e.filterInput&&e.filterInput.val(""),e._filterSource()))},toggle:function(e){this._toggle(e,!0)},_initList:function(){var t,n=this,o=this.options;o.virtual?(t={autoBind:!1,dataValueField:o.dataValueField,dataSource:this.dataSource,selectable:!0,height:this.options.height,groupTemplate:o.groupTemplate||"#:data#",fixedGroupTemplate:o.fixedGroupTemplate||"#:data#",template:o.template||"#:"+i.expr(o.dataTextField,"data")+"#",change:e.proxy(this._listChange,this),click:e.proxy(this._click,this),activate:function(){var e=this.focus();e&&n._focused.add(n.filterInput).attr("aria-activedescendant",e.attr("id"))},deactivate:function(){n._focused.add(n.filterInput).removeAttr("aria-activedescendant")},listBound:e.proxy(this._listBound,this)},"object"==typeof o.virtual&&e.extend(t,o.virtual),this.listView=new i.ui.VirtualList(this.ul,t)):this.listView=new i.ui.StaticList(this.ul,{dataValueField:o.dataValueField,dataSource:this.dataSource,groupTemplate:o.groupTemplate||"#:data#",fixedGroupTemplate:o.fixedGroupTemplate||"#:data#",template:o.template||"#:"+i.expr(o.dataTextField,"data")+"#",activate:function(){var e=this.focus();e&&n._focused.add(n.filterInput).attr("aria-activedescendant",e.attr("id"))},click:e.proxy(this._click,this),change:e.proxy(this._listChange,this),deactivate:function(){n._focused.add(n.filterInput).removeAttr("aria-activedescendant")},dataBinding:function(){n.trigger("dataBinding"),n._angularItems("cleanup")},dataBound:e.proxy(this._listBound,this)}),this.listView.value(this.options.value)},current:function(e){var n;return e===t?(n=this.listView.focus(),!n&&0===this.selectedIndex&&this.optionLabel[0]?this.optionLabel:n):(this._focus(e),t)},dataItem:function(i){var o,r=this;return i===t?(o=r.listView.selectedDataItems()[0],!o&&this.optionLabel[0]&&(o={},n(o,r.options.dataTextField.split("."),r._optionLabelText()),n(o,r.options.dataValueField.split("."),"")),o):("number"!=typeof i&&(i=e(r.items()).index(i)),r.listView.data()[i])},refresh:function(){this.listView.refresh()},text:function(e){var n,i,o=this,r=o.options.ignoreCase;return e=null===e?"":e,e===t?o._textAccessor():("string"==typeof e&&(i=r?e.toLowerCase():e,o._select(function(e){return e=o._text(e),r&&(e=(e+"").toLowerCase()),e===i}),n=o.dataItem(),n&&(e=n)),o._textAccessor(e),t)},value:function(e){var n=this;return e===t?(e=n._accessor()||n.listView.value()[0],e===t||null===e?"":e):(null===e&&(e=""),e=""+e,n.listView.one("change",function(){n._old=n._accessor(),n._oldIndex=n.selectedIndex}),n.listView.value(e),n._fetchData(),t)},_optionLabel:function(){var n=this,o=n.options,r=o.optionLabel,a=o.optionLabelTemplate;return r?(a||(a="#:",a+="string"==typeof r?"data":i.expr(o.dataTextField,"data"),a+="#"),"function"!=typeof a&&(a=i.template(a)),n.optionLabelTemplate=a,n.optionLabel=e('<div class="k-list-optionlabel">'+a(r)+"</div>").prependTo(n.list).click(e.proxy(this._click,this)),n.angular("compile",function(){return{elements:n.optionLabel}}),t):(n.optionLabel=e(),t)},_optionLabelText:function(){var e=this.options.optionLabel;return"string"==typeof e?e:this._text(e)},_listBound:function(){var e,t,n,i=this,o=i.listView.data(),r=o.length,a=i.options.optionLabel,s=i._state===y,l=i.element[0];i._angularItems("compile"),i.options.virtual||(t=i._height(s?r||1:r),i._calculateGroupPadding(t)),i.popup.visible()&&i.popup._position(),i._isSelect&&(e=l.selectedIndex,n=i.value(),r?a&&(a=i._option("",this._optionLabelText())):n&&(e=0,a=i._option(n,i.text())),i._options(o,a),l.selectedIndex=-1===e?0:e),i._hideBusy(),i._makeUnselectable(),s?this.listView.first():(i._open&&i.toggle(!!r),i._open=!1,i._fetch||(r?(!this.listView.value().length&&this._initialIndex>-1&&null!==this._initialIndex&&this.select(this._initialIndex),this._initialIndex=null):this._textAccessor()!==a&&(this.listView.value(""),this._selectValue(null)))),i.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._old&&-1===this._oldIndex&&(this._oldIndex=this.selectedIndex)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(f),this._prevent=!1},_focusoutHandler:function(){var e=this,t=e._state===y,n=window.self!==window.top;e._prevent||(clearTimeout(e._typing),t&&e._select(e._focus(),!e.listView.dataItems()[0]),!t||e.dataItem(),i.support.mobileOS.ios&&n?e._change():e._blur(),e._inputWrapper.removeClass(f),e._prevent=!0,e._open=!1,e.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this,n=t.element,i=e.disable,o=e.readonly,r=t.wrapper.add(t.filterInput).off(c),a=t._inputWrapper.off(_);o||i?i?(r.removeAttr(w),a.addClass(g).removeClass(p)):(a.addClass(p).removeClass(g),r.on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t))):(n.removeAttr(h).removeAttr(d),a.addClass(p).removeClass(g).on(_,t._toggleHover),r.attr(w,r.data(w)).attr(m,!1).attr(v,!1).on("keydown"+c,x(t._keydown,t)).on("focusin"+c,x(t._focusinHandler,t)).on("focusout"+c,x(t._focusoutHandler,t)).on("mousedown"+c,x(t._wrapperMousedown,t)),t.wrapper.on("click"+c,x(t._wrapperClick,t)),t.filterInput||r.on("keypress"+c,x(t._keypress,t))),n.attr(h,i).attr(d,o),r.attr(m,i).attr(v,o)},_option:function(e,t){return'<option value="'+e+'">'+t+"</option>"},_keydown:function(e){var t,n=this,i=e.keyCode,o=e.altKey;i===l.LEFT?i=l.UP:i===l.RIGHT&&(i=l.DOWN),e.keyCode=i,o&&i===l.UP&&n._focusElement(n.wrapper),t=n._move(e),t||(n.popup.visible()&&n.filterInput||(i===l.HOME?(t=!0,n._firstItem()):i===l.END&&(t=!0,n._lastItem()),t&&(n._select(n._focus()),e.preventDefault())),o||t||!n.filterInput||n._search())},_selectNext:function(e,n){for(var i,o=this,r=n,a=o.listView.data(),s=a.length,l=o.options.ignoreCase,c=function(n,i){return n+="",l&&(n=n.toLowerCase()),0===n.indexOf(e)?(o._select(i),o.popup.visible()||o._change(),!0):t};s>n;n++)if(i=o._text(a[n]),i&&c(i,n))return!0;if(r>0&&s>r)for(n=0;r>=n;n++)if(i=o._text(a[n]),i&&c(i,n))return!0;return!1},_keypress:function(e){var t,n,o,r=this;0!==e.which&&e.keyCode!==i.keys.ENTER&&(t=String.fromCharCode(e.charCode||e.keyCode),n=r.selectedIndex,o=r._word,r.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),r._last===t&&1>=o.length&&n>-1&&(o||(o=t),r._selectNext(o,n+1))||(r._word=o+t,r._last=t,r._search()))},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){r.fn._popup.call(this),this.popup.one("open",x(this._popupOpen,this))},_click:function(n){var i=n.item||e(n.currentTarget);return this.trigger("select",{item:i})?(this.close(),t):(this._userTriggered=!0,this._select(i),this._focusElement(this.wrapper),this._blur(),t)},_focusElement:function(e){var t=s(),n=this.wrapper,i=this.filterInput,o=e===i?n:i;i&&o[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){var n,i;e&&(n=this,i=n.options.ignoreCase,i&&(e=e.toLowerCase()),n._select(function(o){var r=n._text(o);return r!==t?(r+="",i&&(r=r.toLowerCase()),0===r.indexOf(e)):t}))},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex,o=e._word;if(clearTimeout(e._typing),"none"!==e.options.filter)e._typing=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typing=null},e.options.delay);else{if(e._typing=setTimeout(function(){e._word=""},e.options.delay),-1===i&&(i=0),!e.ul[0].firstChild)return n.one(u,function(){n.data()[0]&&i>-1&&e._selectNext(o,i)}).fetch(),t;e._selectNext(o,i)}},_get:function(e){var t,n,i;if(this.optionLabel[0]&&("number"==typeof e?e-=1:e instanceof jQuery&&e.hasClass("k-list-optionlabel")&&(e=-1)),"function"==typeof e){for(t=this.listView.data(),i=0;t.length>i;i++)if(e(t[i])){e=i,n=!0;break}n||(e=-1)}return e},_firstItem:function(){this.optionLabel[0]?this._focus(this.optionLabel):this.listView.first()},_lastItem:function(){this.optionLabel.removeClass("k-state-focused"),this.listView.last()},_nextItem:function(){this.optionLabel.hasClass("k-state-focused")?(this.optionLabel.removeClass("k-state-focused"),this.listView.first()):this.listView.next()},_prevItem:function(){this.optionLabel.hasClass("k-state-focused")||(this.listView.prev(),this.listView.focus()||this.optionLabel.addClass("k-state-focused"))},_focusItem:function(){var e=this.listView,n=e.focus(),i=e.select();i=i[i.length-1],i===t&&this.options.highlightFirst&&!n&&(i=0),i!==t?e.focus(i):this.options.optionLabel?(this._focus(this.optionLabel),this._select(this.optionLabel)):e.scrollToIndex(0)},_focus:function(e){var n=this.listView,i=this.optionLabel;return e===t?(e=n.focus(),!e&&i.hasClass("k-state-focused")&&(e=i),e):(i.removeClass("k-state-focused"),e=this._get(e),n.focus(e),-1===e&&i.addClass("k-state-focused"),t)},_select:function(e,t){var n=this.optionLabel;e=this._get(e),t||this._state!==y||(this.listView.clearIndices(),this.listView.filter(!1),this._state=b),n.removeClass("k-state-focused k-state-selected"),this.listView.select(e),-1===e&&(this._selectValue(null),this._focus(n.addClass("k-state-selected")))},_selectValue:function(e){var n="",i="",o=this.listView.select(),r=this.options.optionLabel;o=o[o.length-1],o===t&&(o=-1),e?(i=e,n=this._dataValue(e),r&&(o+=1)):r&&(this._focus(this.optionLabel),i=this._optionLabelText(),n="string"==typeof r?"":this._value(r),o=0),this.selectedIndex=o,null===n&&(n=""),this._textAccessor(i),this._accessor(n,o),this._triggerCascade()},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&a&&(t.options.animation.open.effects=a.android||a.meego?"fadeIn":a.ios||a.wp?"slideIn:up":t.options.animation.open.effects)},_filterHeader:function(){var t,n=this.options,i="none"!==n.filter;this.filterInput&&(this.filterInput.off(c).parent().remove(),this.filterInput=null),i&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,n=this,i=n.wrapper,o="span.k-input";t=i.find(o),t[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(o)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent(),e[0].style.cssText=i.style.cssText),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,t=e.options.optionLabel;e.options.value="",e.dataSource.view()[0]&&(t||e._userTriggered)?e.select(0):(e.select(-1),e._textAccessor(e.options.optionLabel))},_inputTemplate:function(){var t=this,n=t.options.valueTemplate;n=n?i.template(n):e.proxy(i.template("#:this._text(data)#",{useWithBlock:!1}),t),t.valueTemplate=n},_textAccessor:function(o){var r,a=this.listView.selectedDataItems()[0],s=this.valueTemplate,l=this.options,c=l.optionLabel,h=this.span;return o===t?h.text():(e.isPlainObject(o)||o instanceof i.data.ObservableObject?a=o:c&&this._optionLabelText()===o&&(a=c,s=this.optionLabelTemplate),a===t&&(l.dataTextField?(a={},n(a,l.dataTextField.split("."),o),n(a,l.dataValueField.split("."),this._accessor())):a=o),r=function(){return{elements:h.get(),data:[{dataItem:a}]}},this.angular("cleanup",r),h.html(s(a)),this.angular("compile",r),t)}});o.plugin(k)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});