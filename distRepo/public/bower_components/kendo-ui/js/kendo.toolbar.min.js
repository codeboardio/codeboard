/**
 * Copyright 2015 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e,t){function n(n){var i=e(n.useButtonTag?"<button></button>":"<a></a>");return i.data({type:"button"}),i.attr(Y,n.uid),n.attributes&&i.attr(n.attributes),n.togglable&&(i.addClass(v),n.selected&&i.addClass(k)),n.enable===!1&&i.addClass(S),n.url===t||n.useButtonTag||(i.attr("href",n.url),n.mobile&&i.attr(d.attr("role"),"button")),n.group&&i.attr(d.attr("group"),n.group),!n.togglable&&n.click&&f(n.click)&&i.data("click",n.click),n.togglable&&n.toggle&&f(n.toggle)&&i.data("toggle",n.toggle),i}function i(e){var t,n=K.button.base(e);return n.addClass(g),e.primary&&n.addClass(A),e.align&&n.addClass("k-align-"+e.align),e.id&&n.attr("id",e.id),"overflow"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function r(e){var t,n=K.button.base(e);return n.addClass(m+" "+g),e.primary&&n.addClass(A),e.id&&n.attr("id",e.id+"_overflow"),"toolbar"!=e.showText&&e.text&&n.html(e.mobile?'<span class="km-text">'+e.text+"</span>":e.text),t="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&o(e,n),n}function o(t,n){var i,r,o,a=t.icon,s=t.spriteCssClass,l=t.imageUrl;(s||l||a)&&(i=!0,n.contents().not("span.k-sprite,span."+D+",img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),n.addClass(i?E:P)),a?(r=n.children("span."+D).first(),r[0]||(r=e('<span class="'+D+'"></span>').prependTo(n)),r.addClass(M+a)):s?(r=n.children("span.k-sprite").first(),r[0]||(r=e('<span class="k-sprite"></span>').prependTo(n)),r.addClass(s)):l&&(o=n.children("img.k-image").first(),o[0]||(o=e('<img alt="icon" class="k-image" />').prependTo(n)),o.attr("src",l))}function a(){var e,t=this.options.anchor,n=t.outerWidth();d.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function s(e){e.target.is(".k-toggle-button")||e.target.toggleClass(k,"press"==e.type)}function l(t){return t=e(t),t.hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function c(e){e.preventDefault()}var d=window.kendo,u=d.ui.Widget,h=e.proxy,f=d.isFunction,p="k-toolbar",g="k-button",m="k-overflow-button",v="k-toggle-button",_="k-button-group",y="k-split-button",w="k-separator",b="k-popup",x="k-toolbar-resizable",k="k-state-active",S="k-state-disabled",C="k-group-start",T="k-group-end",A="k-primary",D="k-icon",M="k-i-",E="k-button-icon",P="k-button-icontext",z="k-list-container k-split-container",I="k-split-button-arrow",B="k-overflow-anchor",L="k-overflow-container",R="k-toolbar-first-visible",F="k-toolbar-last-visible",O="click",N="toggle",H="open",V="close",U="overflowOpen",W="overflowClose",j="never",G="auto",q="always",$="k-overflow-hidden",Y=d.attr("uid"),K={button:{base:n,toolbar:i,overflow:r},buttonGroup:{base:function(t,n,i){var r,o,a=t.buttons;if(a){for(t.attributes&&i.attr(t.attributes),i.data({type:"buttonGroup"}),i.attr(Y,t.uid),o=0;a.length>o;o++)a[o].uid||(a[o].uid=d.guid()),r=n(e.extend({mobile:t.mobile},a[o])),r.appendTo(i);i.children().first().addClass(C),i.children().last().addClass(T)}},toolbar:function(t){var n=e("<div></div>");return K.buttonGroup.base(t,K.button.toolbar,n),n.addClass(_),t.align&&n.addClass("k-align-"+t.align),t.id&&n.attr("id",t.id),n},overflow:function(t){var n=e("<li></li>");return K.buttonGroup.base(t,K.button.overflow,n),n.addClass((t.mobile?"":_)+" k-overflow-group"),t.id&&n.attr("id",t.id+"_overflow"),n}},splitButton:{toolbar:function(t){var n,i,r,o=e('<div class="'+y+'"></div>'),s=K.button.toolbar(t),c=e('<a class="'+g+" "+I+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),d=e('<ul class="'+z+'"></ul>'),u=t.menuButtons;for(s.appendTo(o),c.appendTo(o),d.appendTo(o),r=0;u.length>r;r++)i=K.button.toolbar(e.extend({mobile:t.mobile,click:t.click},u[r])),i.wrap("<li></li>").parent().appendTo(d);return t.align&&o.addClass("k-align-"+t.align),t.id||(t.id=t.uid),o.attr("id",t.id+"_wrapper"),d.attr("id",t.id+"_optionlist").attr(Y,t.rootUid),t.mobile&&(d=l(d)),n=d.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:o,copyAnchorStyles:!1,animation:t.animation,open:a}).data("kendoPopup"),o.data({type:"splitButton",kendoPopup:n}),o.attr(Y,t.uid),o},overflow:function(t){var n,i,r=e('<li class="'+y+'"></li>'),o=K.button.overflow(t),a=t.menuButtons;for(o.appendTo(r),i=0;a.length>i;i++)n=K.button.overflow(e.extend({mobile:t.mobile},a[i])),n.appendTo(r);return r.data({type:"splitButton"}),r.attr(Y,t.uid),r}},separator:{base:function(t,n){var i=e(n?"<li>&nbsp;</li>":"<div>&nbsp;</div>");return i.data({type:"separator"}),i.attr(Y,t.uid),t.attributes&&i.attr(t.attributes),i.addClass(w),i},toolbar:function(e){var t=K.separator.base(e,!1);return e.id&&t.attr("id",e.id),t},overflow:function(e){var t=K.separator.base(e,!0);return e.id&&t.attr("id",e.id+"_overflow"),t}},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},Q=u.extend({init:function(t,n){var i,r=this;if(u.fn.init.call(r,t,n),n=r.options,t=r.wrapper=r.element,t.addClass(p+" k-widget"),this.uid=d.guid(),t.attr(Y,this.uid),r.isMobile="boolean"==typeof n.mobile?n.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),D="km-icon",M="km-",g="km-button",_="km-buttongroup km-widget",k="km-state-active",S="km-state-disabled"),n.resizable?(r._renderOverflow(),t.addClass(x),r.overflowUserEvents=new d.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+B,tap:h(r._toggleOverflow,r)}),d.onResize(function(){r.resize()})):r.popup={element:e([])},n.items&&n.items.length)for(i=0;n.items.length>i;i++)r.add(n.items[i]);r.userEvents=new d.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+Y+"="+this.uid+"] ."+g+", ["+Y+"="+this.uid+"] ."+m,tap:h(r._buttonClick,r),press:s,release:s}),r.element.on(O,"."+S,c),n.resizable&&r.popup.element.on(O,0/0+S,c),n.resizable&&this._toggleOverflowAnchor(),d.notify(r)},events:[O,N,H,V,U,W],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},destroy:function(){var t=this;t.element.find("."+y).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(t.overflowUserEvents.destroy(),t.popup.destroy()),u.fn.destroy.call(t)},add:function(t){var n,i,r=K[t.type],o=t.template,a=this,s=a.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;e.extend(t,{uid:d.guid(),animation:a.animation,mobile:a.isMobile,rootUid:a.uid}),o&&!l&&(t.overflow=j),t.overflow!==j&&a.options.resizable&&(l?(i=e(f(l)?l(t):l),t.id&&i.attr("id",t.id+"_overflow")):r&&(i=(r.overflow||e.noop)(t)),i&&i.length&&("LI"!==i.prop("tagName")&&(i.removeAttr(Y),i=i.wrap("<li></li>").parent(),i.attr(Y,t.uid)),a._attributes(i,t),i.addClass(s).appendTo(a.popup.container),i.data("overflow")===G&&i.addClass($),a.angular("compile",function(){return{elements:i.get()}}))),t.overflow!==q&&(o?(n=f(o)?o(t):o,n instanceof jQuery||(n=e(n.replace(/^\s+|\s+$/g,""))),n=n.wrap("<div></div>").parent(),t.id&&n.attr("id",t.id),t.attributes&&n.attr(t.attributes),n.attr(Y,t.uid)):r&&(n=(r.toolbar||e.noop)(t)),n&&n.length&&(a._attributes(n,t),a.options.resizable?(n.appendTo(a.element).css("visibility","hidden"),a._shrink(a.element.innerWidth()),n.css("visibility","visible")):n.appendTo(a.element),a.angular("compile",function(){return{elements:n.get()}})))},remove:function(t){var n,i,r,o,a=this.options.resizable;n=this.element.find(t),a&&(i=this.popup.element.find(t)),n.length?(r=n.data("type"),o=n.attr(Y),"splitButton"===n.parent("."+y).data("type")&&(r="splitButton",n=n.parent()),i=a?this.popup.element.find("li["+Y+"='"+o+"']"):e([])):i.length&&(r=i.data("type"),i=i.parent(),"splitButton"===i.data("type")&&(r="splitButton"),o=i.attr(Y),n=this.element.find("div."+y+"["+Y+"='"+o+"']")),"splitButton"===r&&n.data("kendoPopup")&&n.data("kendoPopup").destroy(),n.remove(),i.remove()},enable:function(n,i){var r=this.element.find(n).attr(Y);!r&&this.popup&&(r=this.popup.element.find(n).parent("li").attr(Y)),t===i&&(i=!0),i?e("["+Y+"='"+r+"']").removeClass(S):e("["+Y+"='"+r+"']").addClass(S)},getSelectedFromGroup:function(e){return this.element.find("."+v+"[data-group='"+e+"']").filter("."+k)},toggle:function(t,n){var i,r=e(t),o=r.data("uid"),a=r.data("group");r.hasClass(v)&&(a&&this.element.add(this.popup.element).find("."+v+"[data-group='"+a+"']").filter("."+k).removeClass(k),e.contains(this.element[0],r[0])?(i=this.popup.element.find("["+Y+"='"+o+"']"),"LI"===i.prop("tagName")&&(i=i.find("."+v+":first"))):(o=o?o:r.parent().data("uid"),i=this.element.find("["+Y+"='"+o+"']")),r.add(i).toggleClass(k,n))},_attributes:function(e,t){e.attr(d.attr("overflow"),t.overflow||G)},_renderOverflow:function(){var t=this,n=K.overflowContainer;t.overflowAnchor=e(K.overflowAnchor).addClass(g),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=l(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new d.ui.Popup(n,{origin:"bottom right",position:"top right",anchor:t.overflowAnchor,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var i=d.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):i.css("margin-left",(i.outerWidth()-i.width())/2+1),t.trigger(U)&&n.preventDefault()},close:function(e){t.trigger(W)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find("."+L):t.popup.element,t.popup.container.attr(Y,this.uid)},_toggleOverflowAnchor:function(){this.overflowAnchor.css(this.popup.element.children(":not(."+$+", ."+b+")").length>0?{visibility:"visible",width:""}:{visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,o,a,s,l,c,d,u,h=this;if(n.preventDefault(),r=e(n.target).closest("."+g,h.element),!r.hasClass(B)&&(!r.length&&h.popup&&(r=e(n.target).closest("."+m,h.popup.container)),a=r.hasClass(m)?r.parent("li").hasClass(S):r.hasClass(S),!a)){if(n.target.closest("."+I).length)return h._toggle(n),t;u=r.attr("id")?r.attr("id").replace(/(_overflow$)/,""):t,r.hasClass(v)?(l=r.data("group"),c=f(r.data("toggle"))?r.data("toggle"):null,h.toggle(r),s=r.hasClass(k),d={target:r,group:l,checked:s,id:u},c&&c.call(h,d),h.trigger(N,d)):(c=f(r.data("click"))?r.data("click"):null,d={target:r,id:u},c&&c.call(h,d),h.trigger(O,d)),r.hasClass(m)&&h.popup.close(),o=r.closest(".k-split-container"),o[0]&&(i=o.data("kendoPopup"),(i?i:o.parents(".km-popup-wrapper").data("kendoPopup")).close())}},_toggle:function(t){var n,i=e(t.target).closest("."+y),r=i.data("kendoPopup");t.preventDefault(),i.hasClass(S)||(n=r.element.is(":visible")?this.trigger(V,{target:i}):this.trigger(H,{target:i}),n||r.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(n=this.element.children(":visible:not([data-overflow='never'], ."+B+")"),i=n.length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass($)},_showItem:function(e,t){return e.length&&t>this._childrenWidth()+e.outerWidth(!0)?(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass($),!0):!1},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(R+" "+F),n.first().add(i.first()).addClass(R),n.last().add(i.last()).addClass(F)}});d.ui.plugin(Q)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});